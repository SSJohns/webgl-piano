<!doctype html>
<html lang="en">
    <head>
        <title>Test von Web GL</title>
        <meta charset="utf-8">
                <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
                    <style>
                        body {
                            font-family: Monospace;
                            background-color: #000;
                            color: #fff;
                            margin: 0px;
                            overflow: hidden;
                        }
                    #info {
                        color: #fff;
                        position: absolute;
                        top: 10px;
                        width: 100%;
                        text-align: center;
                        z-index: 100;
                        display:block;
                    }
                    #info a, .button { color: #f00; font-weight: bold; text-decoration: underline; cursor: pointer }
                        </style>
    </head>
    <body style="margin: 0;">
        
        <script src="../build/three.min.js"></script>
        <script src="js/controls/OrbitControls.js"></script>
        <script src="js/loaders/ColladaLoader.js"></script>
    <!--  <script src="audio.js"></script> ****************************-->
    
        <audio id="myAudio" src="sound/scale.m4a"></audio>
        <button type="button" data-start="0" data-stop="1"><img src="images/C4.png"></button> <!-- 0 to 1 -->
        <button type="button" data-start="2" data-stop="3"><img src="images/D4.png"></button>
        <button type="button" data-start="4" data-stop="5"><img src="images/E4.png"></button>
        <button type="button" data-start="6" data-stop="7"><img src="images/F4.png"></button>
        <button type="button" data-start="8" data-stop="9"><img src="images/G4.png"></button>
         <button type="button" data-start="10" data-stop="11"><img src="images/A4.png"></button>
         <button type="button" data-start="12" data-stop="13"><img src="images/B4.png"></button>
         <img src="images\logo.png">
        
        <!-- <input id='image' type="image" src="g.png" data-start="0" data-stop="1"> -->
        
        <script>
           
            var myAudio = document.getElementById('myAudio');
            var buttons = document.getElementsByTagName('button'); //ElementsByTagName
            var stopTime = 0;
            
            for (var i = 0; i < buttons.length; i++) {
                buttons[i].onclick = function() {
                    myAudio.currentTime = this.getAttribute("data-start");
                    stopTime = this.getAttribute("data-stop");
                    myAudio.play();
                };
            }
        
        myAudio.addEventListener('timeupdate', function() {
                                 if (this.currentTime > stopTime) {
                                 this.pause();
                                 }
                                 }, false);
                                 
            </script>
        <!-- **********************************  -->
        
        <script type="x-shader/x-vertex" id="vertexShader">
            
            varying vec3 vWorldPosition;
            
            void main() {
                
                vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
                vWorldPosition = worldPosition.xyz;
                
                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
                
            }
        
            </script>
        
        <script type="x-shader/x-fragment" id="fragmentShader">
            
            uniform vec3 topColor;
            uniform vec3 bottomColor;
            uniform float offset;
            uniform float exponent;
            
            varying vec3 vWorldPosition;
            
            void main() {
                
                float h = normalize( vWorldPosition + offset ).y;
                gl_FragColor = vec4( mix( bottomColor, topColor, max( pow( h, exponent ), 0.0 ) ), 1.0 );
                
            }
        
            </script>
        <script>
            
            // Set up the scene, camera, and renderer as global variables.
            var scene, camera, renderer;
            
        
            init();
            animate();
            
            //*******************************************************
           
            
            // Sets up the scene.
            function init() {
                
                // Create the scene and set the scene size.
                scene = new THREE.Scene();
                var WIDTH = window.innerWidth,
                HEIGHT = window.innerHeight;
                
                // Create a renderer and add it to the DOM.
                renderer = new THREE.WebGLRenderer({antialias:true});
                renderer.setSize(WIDTH, HEIGHT);
                document.body.appendChild(renderer.domElement);
                
                // Create a camera, zoom it out from the model a bit, and add it to the scene.
                camera = new THREE.PerspectiveCamera(30, WIDTH / HEIGHT, 0.5, 20000);
                camera.position.set(100,550,1000); //-350, 350, 800
                scene.add(camera);
                
                //*******
                //loadSoundObj({ src : 'credo.mp3' });
                
                // Create an event listener that resizes the renderer with the browser window.
                window.addEventListener('resize', function() {
                                        var WIDTH = window.innerWidth,
                                        HEIGHT = window.innerHeight;
                                        renderer.setSize(WIDTH, HEIGHT);
                                        camera.aspect = WIDTH / HEIGHT;
                                        camera.updateProjectionMatrix();
                                        });
                                        
                                        //Background
                                        
                                        var vertexShader = document.getElementById( 'vertexShader' ).textContent;
                                        var fragmentShader = document.getElementById( 'fragmentShader' ).textContent;
                                        var uniforms = {
                                            topColor: 	 { type: "c", value: new THREE.Color(0x000000) },
                                            bottomColor: { type: "c", value: new THREE.Color( 0x262626 ) },
                                            offset:		 { type: "f", value: 100 },
                                            exponent:	 { type: "f", value: 0.7 }//unsch√§rfe
                                        }
                                        
                                        
                                        //skydome
                                        
                                        var skyGeo = new THREE.SphereGeometry( 2000, 32, 15 );//Kugel
                                        var skyMat = new THREE.ShaderMaterial( { vertexShader: vertexShader, fragmentShader: fragmentShader, uniforms: uniforms, side: THREE.BackSide } );
                                        
                                        var sky = new THREE.Mesh( skyGeo, skyMat );
                                        scene.add( sky );
                                        
                                        
                                        // Create a light, set its position, and add it to the scene.
                                        var light = new THREE.PointLight(0xfffff3, 0.8);
                                        light.position.set(-100,200,100);
                                        scene.add(light);
                                        
                                        var sphereSize = 1; 
                                        var pointLightHelper = new THREE.PointLightHelper( light, sphereSize ); 
                                        scene.add( pointLightHelper );
                                        
                                        
                                        var light2 = new THREE.PointLight(0xd7f0ff, 0.2);
                                        light2.position.set(200,200,100);
                                        scene.add(light2);
                                        
                                        var sphereSize = 1; 
                                        var pointLightHelper2 = new THREE.PointLightHelper( light2, sphereSize ); 
                                        scene.add( pointLightHelper2 );
                                        
                                        
                                        var light3 = new THREE.PointLight(0xFFFFFF, 0.5);
                                        light3.position.set(150,200,-100);
                                        scene.add(light3);
                                        
                                        var sphereSize = 1; 
                                        var pointLightHelper3 = new THREE.PointLightHelper( light3, sphereSize ); 
                                        scene.add( pointLightHelper3 );
                                        
                                        var loader = new THREE.ColladaLoader();
                                        
                                        
                                        loader.options.convertUpAxis = true;
                                        
                                        
                                        loader.load( 'obj/piano.dae', function ( collada ) {
                                                    
                                                    
                                                    var dae = collada.scene;
                                                    
                                                    
                                                    var skin = collada.skins[ 0 ];
                                                    
                                                    
                                                    dae.position.set(5,5,0);//x,z,y- if you think in blender dimensions ;)
                                                    dae.scale.set(1.5,1.5,1.5);
                                                    
                                                    scene.add(dae);
                                                    
                                                    
                                                    
                                                    
                                                    
                                                    
                                                    var axes = new THREE.AxisHelper(50);
                                                    axes.position = dae.position;
                                                    scene.add(axes);
                                                    
                                                    var gridXZ = new THREE.GridHelper(100, 10);
                                                    gridXZ.setColors( new THREE.Color(0x8f8f8f), new THREE.Color(0x8f8f8f) );
                                                    gridXZ.position.set(0,0,0 );
                                                    scene.add(gridXZ);
                                                    
                                                    
                                                    });
                                                    
                                                    // Add OrbitControls so that we can pan around with the mouse.
                                                    controls = new THREE.OrbitControls(camera, renderer.domElement);
                                                    
            }
        
        
        ////  ADDED HERE **************///
       
        
        
         

//************************************************************************
        
        
        
        // Renders the scene and updates the render as needed.
        function animate() {
            
            
            requestAnimationFrame(animate);
            
            // Render the scene.
            renderer.render(scene, camera);
            controls.update();
            
        }
        
            </script>
        
    </body>
</html>
